@page
@model IndexModel
@{
    ViewData["Title"] = "Начало";
}


@* <div class="container mt-5">
    <div class="row" >
        <div class="col-md-5">
            <h2 class="mb-6">Калкулатор</h2>
            <div class="card shadow-sm p-4">
                <div class="mb-3">
                    <label asp-for="Amount" class="form-label">Сума (лв.)</label>
                    <input asp-for="Amount" type="number" class="form-control" id="amount" min="300" max="5000" step="100" />
                </div>
                <div class="mb-3">
                    <label asp-for="PeriodMonths" class="form-label">Период (месеци)</label>
                    <input asp-for="PeriodMonths" type="number" class="form-control" id="period" min="5" max="24" step="1" />
                </div>
                <div class="mt-4 p-3 bg-light rounded">
                    <p>Месечна вноска: <strong id="monthlyPayment">0.00 лв.</strong></p>
                    <p>Общо за плащане: <strong id="totalPayment">0.00 лв.</strong></p>
                    <p class="text-secondary"><small>ГЛП: 40% </small></p>

                </div>
                <div class="mt-4 text-end">
                    <a class="btn btn-primary-miriam btn-lg rounded-pill " href="/ApplicationForm/Step1_Personal">Вземи сега</a>
                </div>
            </div>
        </div>
        <div class="col-md-7 d-flex align-items-center justify-content-center h-100 overflow-auto p-0">
            <img src="~/images/homePage.jpg" class="img-fluid" style="object-fit: cover;" alt="Начална страница" />
        </div>
    </div>  
</div> *@
<div class="container mt-5">
    <div class="row">
        <div class="col-md-5">
            <h2 class="mb-6">Калкулатор</h2>
            <div class="card shadow-sm p-4">
                <div class="mb-4">
                    <div class="d-flex justify-content-between">
                        <label for="amount" class="form-label">Сума (лв.)</label>
                        <strong id="amountDisplay">300 лв.</strong>
                    </div>
                    <input asp-for="Amount"
                           type="range"
                           class="form-range"
                           id="amount"
                           min="300"
                           max="5000"
                           step="100"
                           value="300" />
                </div>

                <!-- Период -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between">
                        <label for="period" class="form-label">Период (месеци)</label>
                        <strong id="periodDisplay">5 м.</strong>
                    </div>
                    <input asp-for="PeriodMonths"
                           type="range"
                           class="form-range"
                           id="period"
                           min="5"
                           max="24"
                           step="1"
                           value="5" />
                </div>

                <div class="mt-4 p-3 bg-light rounded">
                    <p>Месечна вноска: <strong id="monthlyPayment">0.00</strong> лв.</p>
                    <p>Общо за плащане: <strong id="totalPayment">0.00</strong> лв.</p>
                    <p class="text-secondary"><small>ГЛП: 40%</small></p>
                </div>

                <div class="mt-4 text-end">
                    <a class="btn btn-primary-miriam btn-lg rounded-pill" href="/ApplicationForm/Step1_Personal">Вземи сега</a>
                </div>
            </div>
        </div>
        <div class="col-md-7 d-flex align-items-center justify-content-center h-100 overflow-auto p-0">
            <img src="~/images/homePage.jpg" class="img-fluid" style="object-fit: cover;" alt="Начална страница" />
        </div>
    </div>
</div>

<section class="py-5 bg-light">
    <div class="container">
        <h3 class="text-center mb-4">Защо да изберете нас?</h3>
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="p-4 bg-white rounded shadow-sm h-100">
                    <i class="fas fa-clock fa-2x mb-3 text-primary"></i>
                    <h5>Бързо одобрение</h5>
                    <p>Получавате отговор в рамките на минути без дълги формалности.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="p-4 bg-white rounded shadow-sm h-100">
                    <i class="fas fa-hand-holding-usd fa-2x mb-3 text-primary"></i>
                    <h5>Гъвкави условия</h5>
                    <p>Изберете срок и сума според нуждите си с подробни условия.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="p-4 bg-white rounded shadow-sm h-100">
                    <i class="fas fa-shield-alt fa-2x mb-3 text-primary"></i>
                    <h5>Сигурност и прозрачност</h5>
                    <p>Вашите данни са защитени, а всички такси са ясно посочени.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container">
        <h3 class="text-center mb-4">Как работи</h3>
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="px-3">
                    <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:60px; height:60px;">1</div>
                    <h6>Попълнете формата</h6>
                    <p>Въведете желаната сума и период с няколко клика.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="px-3">
                    <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:60px; height:60px;">2</div>
                    <h6>Одобрение</h6>
                    <p>Получете парите си до минути.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="px-3">
                    <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:60px; height:60px;">3</div>
                    <h6>Получете сумата</h6>
                    <p>Парите са по вашата банкова сметка до 24 часа.</p>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- FAQ -->
<section class="py-5">
    <div class="container">
        <h3 class="text-center mb-4">Често задавани въпроси</h3>
        <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="faqHeading1">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse1" aria-expanded="false" aria-controls="faqCollapse1">
                        Как се изчислява лихвата?
                    </button>
                </h2>
                <div id="faqCollapse1" class="accordion-collapse collapse" aria-labelledby="faqHeading1" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Лихвата се изчислява спрямо Годишния процент на разходите (ГПР), който е 40%.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="faqHeading2">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse2" aria-expanded="false" aria-controls="faqCollapse2">
                        Има ли скрити такси?
                    </button>
                </h2>
                <div id="faqCollapse2" class="accordion-collapse collapse" aria-labelledby="faqHeading2" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Всички такси са ясно посочени в приложението и нямаме скрити условия.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


@section Scripts {
@*     <script>
        const amountInput = document.getElementById('amount');
        const periodInput = document.getElementById('period');
        const monthlyLabel = document.getElementById('monthlyPayment');
        const totalLabel = document.getElementById('totalPayment');
        const interestRate = 0.40; 

        function calculate() {
            const principal = parseFloat(amountInput.value) || 0;
            const months = parseInt(periodInput.value) || 0;
            if (principal < 300 || principal > 5000 || months < 5 || months > 24) {
                monthlyLabel.textContent = '0.00 лв.';
                totalLabel.textContent = '0.00 лв.';
                return;
            }
            const monthlyRate = interestRate / 12;
            const monthly = (principal * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -months));
            const total = monthly * months;
            monthlyLabel.textContent = monthly.toFixed(2) + ' лв.';
            totalLabel.textContent = total.toFixed(2) + ' лв.';
        }

        amountInput.addEventListener('input', calculate);
        periodInput.addEventListener('input', calculate);
    </script> *@

    <script>
        const annualRate = 0.40;

        const amountSlider = document.getElementById('amount');
        const periodSlider = document.getElementById('period');

        const amountDisplay = document.getElementById('amountDisplay');
        const periodDisplay = document.getElementById('periodDisplay');

        const monthlyPaymentEl = document.getElementById('monthlyPayment');
        const totalPaymentEl = document.getElementById('totalPayment');

        function calculate() {
          const principal = parseFloat(amountSlider.value);
          const months = parseInt(periodSlider.value, 10);

          amountDisplay.textContent = principal.toLocaleString() + ' лв.';
          periodDisplay.textContent = months + ' м.';

          const monthlyRate = annualRate / 12;
          const payment = (principal * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -months));

          monthlyPaymentEl.textContent = payment.toFixed(2);
          totalPaymentEl.textContent = (payment * months).toFixed(2);
        }

        amountSlider.addEventListener('input', calculate);
        periodSlider.addEventListener('input', calculate);

        calculate();
    </script>
}